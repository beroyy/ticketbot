model Event {
  id               String   @id @default(cuid())
  guildId          String   @map("guild_id")
  
  actorId          String   @map("actor_id")
  
  category         EventCategory
  action           String
  
  targetType       EventTargetType @map("target_type")
  targetId         String   @map("target_id")
  
  ticketId         Int?     @map("ticket_id")
  guildRoleId       Int?     @map("guild_role_id")
  
  metadata         Json?
  
  createdAt        DateTime @default(now()) @map("created_at")
  expiresAt        DateTime? @map("expires_at")
  
  guild            Guild        @relation(fields: [guildId], references: [id], onDelete: Cascade)
  actor            DiscordUser  @relation(fields: [actorId], references: [id])
  guildRole         GuildRole?    @relation(fields: [guildRoleId], references: [id])
  ticket           Ticket?      @relation(fields: [ticketId], references: [id])
  
  @@index([guildId, createdAt(sort: Desc)])
  @@index([actorId, createdAt(sort: Desc)])
  @@index([ticketId, createdAt(sort: Desc)])
  @@index([guildRoleId, createdAt(sort: Desc)])
  @@index([targetType, targetId, createdAt(sort: Desc)])
  @@index([expiresAt])
  
  @@map("events")
}